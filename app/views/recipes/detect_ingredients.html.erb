<div class="container" style="margin-top: 20vh; margin-left: 4vh">
  <h1>Detect Ingredients</h1>

  <% if flash[:error] %>
    <div class="alert alert-danger">
      <%= flash[:error] %>
    </div>
  <% end %>

  <% if flash[:notice] %>
    <div class="alert alert-success">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <%= form_with(url: process_image_recipes_path, method: :post, multipart: true) do |form| %>
    <div class="form-group">
      <%= form.label :image, "Upload Image" %>
      <%= form.file_field :image, accept: 'image/*', class: 'form-control-file' %>
    </div>

    <div class="form-group">
      <%= form.submit "Detect Ingredients", class: 'btn btn-primary my-2' %>
    </div>
  <% end %>

  <% if session[:detected_ingredients].present? %>
    <div class="detected-ingredients">
      <h2>Detected Ingredients:</h2>
      <pre style="white-space: pre-wrap; word-wrap: break-word;"><%= session[:detected_ingredients] %></pre>
    </div>
  <% end %>

  <%= link_to "Generate recipes", generate_recipes_path, class: "btn btn-lg btn-primary btn-lg shadow-sm my-2"  %>
</div>
