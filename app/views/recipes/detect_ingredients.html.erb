<div class="container my-5">
  <%= render 'shared/header', title: 'Detect Ingredients' %>

  <%= form_with(url: process_image_recipes_path, method: :post, multipart: true, class: "needs-validation") do |form| %>
    <div class="form-group mb-4">
      <%= form.label :image, "Upload or Take a Picture", class: "form-label" %>
      <%= form.file_field :image, accept: "image/*", class: "form-control-file" %>
      <small class="form-text text-muted">You can upload an image or take a picture using your device's camera.</small>
    </div>

    <div class="d-flex justify-content-center">
      <%= form.submit "Detect Ingredients", class: "btn btn-primary btn-lg px-4 shadow-sm" %>
    </div>
  <% end %>

  <% if session[:detected_ingredients].present? %>
    <div class="mt-5">
      <h2 class="text-center">Detected Ingredients</h2>
      <ul class="list-group mt-3">
        <% session[:detected_ingredients].split(',').each do |ingredient| %>
          <li class="list-group-item text-capitalize"><%= ingredient.strip %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="d-flex justify-content-center my-4">
    <%= link_to "Generate Recipes", recipes_path, class: "btn btn-secondary btn-lg shadow-sm px-4" %>
  </div>
</div>
