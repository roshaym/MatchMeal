<div class="container">
  <h1>Detect Ingredients</h1>

  <% if flash[:error] %>
    <div class="alert alert-danger">
      <%= flash[:error] %>
    </div>
  <% end %>

  <% if flash[:notice] %>
    <div class="alert alert-success">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <%= form_with(url: process_image_recipes_path, method: :post, multipart: true) do |form| %>
    <div class="form-group">
      <%= form.label :image, "Upload Image" %>
      <%= form.file_field :image, accept: 'image/*', class: 'form-control-file' %>
    </div>

    <div class="form-group">
      <%= form.submit "Detect Ingredients", class: 'btn btn-primary' %>
    </div>
  <% end %>

  <% if session[:detected_ingredients].present? %>
    <div class="detected-ingredients">
      <h2>Detected Ingredients:</h2>
      <pre><%= session[:detected_ingredients] %></pre>
      
      <% # Optional: Clear the session after displaying %>
      <% session.delete(:detected_ingredients) %>
    </div>
  <% end %>
</div>
